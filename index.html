<!DOCTYPE html>
<html>

<head>
  <title>Astro Live</title>
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/2048px-Telegram_logo.svg.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.1.1/shaka-player.ui.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.1.1/controls.min.css" crossorigin="anonymous">

  <style>
    /* CSS Variables for Easy Theme Customization */
    :root {
      --primary-glow: #00ffff;      /* A vibrant cyan for highlights */
      --secondary-glow: #ff00ff;   /* A magenta for gradients */
      --bg-start: #0f0c29;         /* Gradient Start Color */
      --bg-mid: #302b63;           /* Gradient Middle Color */
      --bg-end: #24243e;           /* Gradient End Color */
      --text-primary: #ffffff;
      --text-secondary: #cccccc;
      --popup-bg: rgba(20, 20, 40, 0.6); /* Semi-transparent background for the popup */
    }

    /* Animated Gradient Background */
    @keyframes gradient-animation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(-45deg, var(--bg-start), var(--bg-mid), var(--bg-end), var(--secondary-glow));
      background-size: 400% 400%;
      animation: gradient-animation 20s ease infinite;
      overflow: hidden;
    }

    video {
      width: 100%;
      height: 100%;
    }

    /* Popup Overlay for centering and background dimming */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9998;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.3s ease;
    }

    /* Redesigned "Glassmorphism" Popup */
    .telegram-popup {
      background: var(--popup-bg);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      color: var(--text-primary);
      padding: 30px 25px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 60px 5px rgba(0, 0, 0, 0.5), 
                  inset 0 0 0 1.5px var(--primary-glow);
      z-index: 9999;
      text-align: center;
      width: 90%;
      max-width: 380px;
      animation: popup-enter 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    }
    
    /* Popup Entry Animation */
    @keyframes popup-enter {
        from {
            opacity: 0;
            transform: scale(0.8) translateY(20px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }
    
    /* Class for closing animation */
    .popup-overlay.closing {
      opacity: 0;
    }
    .popup-overlay.closing .telegram-popup {
      transform: scale(0.8);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .telegram-popup h2 {
      margin-top: 0;
      font-weight: 700;
      font-size: 24px;
      color: var(--primary-glow);
      text-shadow: 0 0 10px var(--primary-glow);
    }

    .telegram-popup p {
      font-size: 14px;
      line-height: 1.6;
      color: var(--text-secondary);
    }
    
    .telegram-popup p strong {
        color: var(--text-primary);
        font-weight: 600;
    }

    /* Redesigned Buttons with Hover Effects */
    .telegram-popup button {
      width: 100%;
      padding: 14px;
      margin-top: 15px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }
    
    .telegram-popup a {
      text-decoration: none;
    }

    .telegram-popup .join {
      background-color: var(--primary-glow);
      color: #0c0c1e;
      box-shadow: 0 0 20px 0px rgba(0, 255, 255, 0.5);
    }
    
    .telegram-popup .join:hover {
      transform: translateY(-4px) scale(1.03);
      box-shadow: 0 0 35px 5px rgba(0, 255, 255, 0.7);
    }

    .telegram-popup .joined {
      background-color: transparent;
      color: var(--primary-glow);
      border: 2px solid var(--primary-glow);
    }

    .telegram-popup .joined:hover {
        background-color: var(--primary-glow);
        color: #0c0c1e;
    }

    @media (max-width: 480px) {
      .telegram-popup {
        padding: 25px 20px;
      }
    }
  </style>
</head>

<body>
  <center>
    <div data-shaka-player-container style="position:absolute;top:0;left:0;width:100%;height:100%;">
      <video autoplay muted playsinline data-shaka-player id="video"
        poster="https://www.disneystar.com/media/2231/7e25132017-009.jpg?width=1920&height=1080&mode=max&slimmage=true"
        style="width:100%;height:100%"></video>
    </div>
  </center>

  <div class="popup-overlay" id="popupOverlay">
    <div class="telegram-popup" id="telegramPopup">
      <h2>Support Us!</h2>
      <p>Join our Telegram channel <strong>@one8chirag</strong> for instant updates, highlights, and exclusive links.</p>
      <a href="https://t.me/one8chirag" target="_blank"><button class="join">Join Now</button></a>
      <button class="joined" onclick="closePopup()">Already Joined</button>
    </div>
  </div>

  <script>
    // Shaka Player Setup
    document.addEventListener("shaka-ui-loaded", function () {
      const video = document.getElementById("video");
      const ui = video["ui"];
      const controls = ui.getControls();
      const player = controls.getPlayer();

      player.configure({
        drm: {
          clearKeys: {
            "1779c27b9d077a3ba0c9cc1bb9a94b9f": "cc5cf3b7928fb9e0a1ee6a8b566f0a8e"
          }
        },
        streaming: {
          rebufferingGoal: 1,
          bufferingGoal: 3,
          bufferBehind: 5,
          lowLatencyMode: true,
          autoLowLatencyMode: true,
          startAtSegmentBoundary: true,
          ignoreTextStreamFailures: true
        },
        manifest: {
          dash: {
            autoCorrectDrift: true,
            ignoreMinBufferTime: true
          }
        }
      });

      ui.configure({
        controlPanelElements: [
          "play_pause", "mute", "volume", "spacer", "time_and_duration", "quality", "fullscreen", "overflow_menu"
        ],
        volumeBarColors: { base: 'rgba(63, 187, 1, 1)', level: 'rgb(255, 69, 0)' },
        seekBarColors: { base: 'rgb(41, 41, 163)', buffered: 'rgb(35, 99, 3)', played: 'rgba(63, 187, 1, 1)' }
      });

      player.load("https://abmyxykaaaaaaaamkyvb65fuqebyg.7a77200bf98444ac997a89ed83775793.emt.cf.ww.aiv-cdn.net/iad-nitro/live/clients/dash/enc/f60kqesunw/out/v1/a435ed7a00f947deb4369b46d8f2fb70/cenc.mpd")
        .then(() => {
          console.log("Video loaded successfully.");
        })
        .catch(error => console.error("Video load error:", error));
    });

    document.addEventListener("shaka-ui-load-failed", function () {
      console.error("Shaka UI failed to load");
    });

    // Function to close the popup with an animation
    function closePopup() {
      const popupOverlay = document.getElementById('popupOverlay');
      popupOverlay.classList.add('closing');
      
      // Wait for the animation to finish before hiding it completely
      setTimeout(() => {
        popupOverlay.style.display = 'none';
      }, 300); // This duration should match the transition time in CSS
    }
  </script>
</body>

</html>
